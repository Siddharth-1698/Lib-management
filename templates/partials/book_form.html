<form method="post" 
      hx-post="{% if book %}{% url 'book_update' book.id %}{% else %}{% url 'book_create' %}{% endif %}" 
      hx-target="#modal" 
      hx-swap="innerHTML">
    {% csrf_token %}
    <div class="mb-3">
        {{ form.title.label_tag }} {{ form.title }}
    </div>
    <div class="mb-3">
        {{ form.author.label_tag }} {{ form.author }}
    </div>
    <div class="mb-3">
        {{ form.isbn.label_tag }} {{ form.isbn }}
    </div>
    <div class="mb-3">
        {{ form.published_date.label_tag }}
        <input 
            type="date" 
            name="published_date" 
            class="form-control" 
            id="id_published_date" 
            placeholder="YYYY-MM-DD"
            value="{{ form.published_date.value|default:'' }}">
    </div>
    <div class="d-flex justify-content-end">
        <button type="submit" class="btn btn-success me-2">Save</button>
        <button type="button" class="btn btn-secondary" onclick="location.reload()">Cancel</button>
    </div>
    <script>
        document.body.addEventListener('refreshPage', function () {
            location.reload();  // Refresh the entire page
        });
    </script>
</form>
